<!DOCTYPE html>
<html lang="{{ site.lang | default: "en" }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {%- seo -%}
    {%- feed_meta -%}
    {%- if jekyll.environment == 'production' and site.google_analytics -%}
      {%- include google-analytics.html -%}
    {%- endif -%}

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ '/assets/css/theme.css' | asset_url }}">
  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-lg bg-primary navbar-dark">
        <div class="container">
          <a class="navbar-brand fw-bold" href="{{ '/' | relative_url }}">
              <h1 class="mb-0">
                {% if page.freguesia %}
                    <em>Viver</em> {{ page.freguesia }}
                {% else %}
                    <em>Viver</em> Lisboa
                {% endif %}
              </h1>
          </a>

          <!-- Parties section on the right -->
          <div class="navbar-nav ms-auto">
            <!-- Find freguesia page data if freguesia_slug is specified -->
            {% if page.freguesia_slug %}
              {% assign freguesia_path = "freguesias/" | append: page.freguesia_slug | append: "/index.html" %}
              {% assign freguesia_page = site.pages | where: "path", freguesia_path | first %}
              {% if freguesia_page and freguesia_page.parties %}
                <!-- Create a temporary page variable with parties data for the include -->
                {% assign temp_page = page %}
                {% assign page = freguesia_page %}
                {% include parties.html %}
                {% assign page = temp_page %}
              {% endif %}
            {% elsif page.parties %}
              <!-- Use page parties if no freguesia_slug specified -->
              {% include parties.html %}
            {% endif %}
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div class="container">
        {{ content }}
      </div>
    </main>

    <footer>
      <div class="container">
        <div class="footer-content">
          {% if false %}
            <p>&copy; {{ "now" | date: "%Y" }} {{ site.title }}. Built with Jekyll and Bootstrap.</p>
          {% endif %}
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>
